<!doctype html>
<head>
	<meta charset="utf-8">
	<title>NESPPOI NES like platform</title>
</head>
<body style="margin:0;">
	<div style="padding:0 2rem; display:flex; gap:1rem;">
		<h1 style="margin:0.5rem 0 0;">NESPPOI</h1>
		<h4 style="margin:0; align-self:end; flex-grow:1;">NES like platform</h4>
		<h3 style="margin:0; align-self:end;" onclick="document.getElementById('menu').style.display = document.getElementById('menu').style.display === 'none' ? 'block' : 'none'">Menu</h3>
	</div>
	<hr>

	<div id="menu" style="padding:0 2rem; display:none;">
		<div style="display:flex; gap:1rem;">
			<h3 style="margin:0.5rem 0 0;">Load local ROM</h3>
			<input style="align-self:end;" webkitdirectory type="file" onchange="for (const file of event.target.files) if (file.name === 'Rom.js') System.loadRom(file.webkitRelativePath.replace('/' + file.name, ''));">
		</div>
		<hr>

		<div style="display:flex; gap:1rem;">
			<h3 style="margin:0.5rem 0 0;">Full screen</h3>
			<button id="fullscreen">Fullscreen Mode</button>
		</div>
		<hr>

		<div style="display:flex; gap:1rem;">
			<h3 style="margin:0.5rem 0 0;">Pad 0</h3>
			<button onclick="document.querySelector('#pads0 .keys0').disabled = false; System.pads[0].setup();">Setup</button>
		</div>
		<div style="display:flex;" id="pads0">
			<div>
				<div style="text-align:center;">
					UP<br>
					<input class="keys2" disabled onfocus="this.select();" style="width:5rem; text-align:center;">
				</div>
				<div style="display:flex;">
					<div style="text-align:center;">
						LEFT<br>
						<input class="keys0" disabled onfocus="this.select();" style="width:5rem; text-align:center;">
					</div>
					<div style="text-align:center;">
						RIGHT<br>
						<input class="keys1" disabled onfocus="this.select();" style="width:5rem; text-align:center;">
					</div>
				</div>
				<div style="text-align:center;">
					DOWN<br>
					<input class="keys3" disabled onfocus="this.select();" style="width:5rem; text-align:center;">
				</div>
			</div>
			<div style="display:flex; padding-top:4rem;">
				<div style="text-align:center; margin-left:1rem;">
					SELECT<br>
					<input class="keys4" disabled onfocus="this.select();" style="width:5rem; text-align:center;">
				</div>
				<div style="text-align:center;">
					START<br>
					<input class="keys5" disabled onfocus="this.select();" style="width:5rem; text-align:center;">
				</div>
				<div style="text-align:center; margin-left:1rem;">
					B<br>
					<input class="keys6" disabled onfocus="this.select();" style="width:5rem; text-align:center;">
				</div>
				<div style="text-align:center;">
					A<br>
					<input class="keys7" disabled onfocus="this.select();" style="width:5rem; text-align:center;">
				</div>
			</div>
		</div>
		<hr>

		<div style="display:flex; gap:1rem;">
			<h3 style="margin:0.5rem 0 0;">Pad 1</h3>
			<button onclick="document.querySelector('#pads1 .keys0').disabled = false; System.pads[1].setup();">Setup</button>
		</div>
		<div style="display:flex;" id="pads1">
			<div>
				<div style="text-align:center;">
					UP<br>
					<input class="keys2" disabled onfocus="this.select();" style="width:5rem; text-align:center;">
				</div>
				<div style="display:flex;">
					<div style="text-align:center;">
						LEFT<br>
						<input class="keys0" disabled onfocus="this.select();" style="width:5rem; text-align:center;">
					</div>
					<div style="text-align:center;">
						RIGHT<br>
						<input class="keys1" disabled onfocus="this.select();" style="width:5rem; text-align:center;">
					</div>
				</div>
				<div style="text-align:center;">
					DOWN<br>
					<input class="keys3" disabled onfocus="this.select();" style="width:5rem; text-align:center;">
				</div>
			</div>
			<div style="display:flex; padding-top:4rem;">
				<div style="text-align:center; margin-left:1rem;">
					SELECT<br>
					<input class="keys4" disabled onfocus="this.select();" style="width:5rem; text-align:center;">
				</div>
				<div style="text-align:center;">
					START<br>
					<input class="keys5" disabled onfocus="this.select();" style="width:5rem; text-align:center;">
				</div>
				<div style="text-align:center; margin-left:1rem;">
					B<br>
					<input class="keys6" disabled onfocus="this.select();" style="width:5rem; text-align:center;">
				</div>
				<div style="text-align:center;">
					A<br>
					<input class="keys7" disabled onfocus="this.select();" style="width:5rem; text-align:center;">
				</div>
			</div>
		</div>
		<hr>

		<div style="display:flex; gap:1rem;">
			<h3 style="margin:0.5rem 0 0;">Keybord Pad 0</h3>
			<button onclick="document.querySelector('#keyboardPads0 .keys0').disabled = false; document.querySelector('#keyboardPads0 .keys0').focus();">Setup</button>
		</div>
		<div style="display:flex;" id="keyboardPads0">
			<div>
				<div style="text-align:center;">
					UP<br>
					<input class="keys2" disabled onfocus="this.select();" onkeydown="event.stopPropagation(); System.pads[0].configKey(2, event.key);" style="width:5rem; text-align:center;">
				</div>
				<div style="display:flex;">
					<div style="text-align:center;">
						LEFT<br>
						<input class="keys0" disabled onfocus="this.select();" onkeydown="event.stopPropagation(); System.pads[0].configKey(0, event.key);" style="width:5rem; text-align:center;">
					</div>
					<div style="text-align:center;">
						RIGHT<br>
						<input class="keys1" disabled onfocus="this.select();" onkeydown="event.stopPropagation(); System.pads[0].configKey(1, event.key);" style="width:5rem; text-align:center;">
					</div>
				</div>
				<div style="text-align:center;">
					DOWN<br>
					<input class="keys3" disabled onfocus="this.select();" onkeydown="event.stopPropagation(); System.pads[0].configKey(3, event.key);" style="width:5rem; text-align:center;">
				</div>
			</div>
			<div style="display:flex; padding-top:4rem;">
				<div style="text-align:center; margin-left:1rem;">
					SELECT<br>
					<input class="keys4" disabled onfocus="this.select();" onkeydown="event.stopPropagation(); System.pads[0].configKey(4, event.key);" style="width:5rem; text-align:center;">
				</div>
				<div style="text-align:center;">
					START<br>
					<input class="keys5" disabled onfocus="this.select();" onkeydown="event.stopPropagation(); System.pads[0].configKey(5, event.key);" style="width:5rem; text-align:center;">
				</div>
				<div style="text-align:center; margin-left:1rem;">
					B<br>
					<input class="keys6" disabled onfocus="this.select();" onkeydown="event.stopPropagation(); System.pads[0].configKey(6, event.key);" style="width:5rem; text-align:center;">
				</div>
				<div style="text-align:center;">
					A<br>
					<input class="keys7" disabled onfocus="this.select();" onkeydown="event.stopPropagation(); System.pads[0].configKey(7, event.key);" style="width:5rem; text-align:center;">
				</div>
			</div>
		</div>
		<hr>

		<div style="display:flex; gap:1rem;">
			<h3 style="margin:0.5rem 0 0;">Keybord Pad 1</h3>
			<button onclick="document.querySelector('#keyboardPads1 .keys0').disabled = false; document.querySelector('#keyboardPads1 .keys0').focus();">Setup</button>
		</div>
		<div style="display:flex;" id="keyboardPads1">
			<div>
				<div style="text-align:center;">
					UP<br>
					<input class="keys2" disabled onfocus="this.select();" onkeydown="event.stopPropagation(); System.pads[1].configKey(2, event.key);" style="width:5rem; text-align:center;">
				</div>
				<div style="display:flex;">
					<div style="text-align:center;">
						LEFT<br>
						<input class="keys0" disabled onfocus="this.select();" onkeydown="event.stopPropagation(); System.pads[1].configKey(0, event.key);" style="width:5rem; text-align:center;">
					</div>
					<div style="text-align:center;">
						RIGHT<br>
						<input class="keys1" disabled onfocus="this.select();" onkeydown="event.stopPropagation(); System.pads[1].configKey(1, event.key);" style="width:5rem; text-align:center;">
					</div>
				</div>
				<div style="text-align:center;">
					DOWN<br>
					<input class="keys3" disabled onfocus="this.select();" onkeydown="event.stopPropagation(); System.pads[1].configKey(3, event.key);" style="width:5rem; text-align:center;">
				</div>
			</div>
			<div style="display:flex; padding-top:4rem;">
				<div style="text-align:center; margin-left:1rem;">
					SELECT<br>
					<input class="keys4" disabled onfocus="this.select();" onkeydown="event.stopPropagation(); System.pads[1].configKey(4, event.key);" style="width:5rem; text-align:center;">
				</div>
				<div style="text-align:center;">
					START<br>
					<input class="keys5" disabled onfocus="this.select();" onkeydown="event.stopPropagation(); System.pads[1].configKey(5, event.key);" style="width:5rem; text-align:center;">
				</div>
				<div style="text-align:center; margin-left:1rem;">
					B<br>
					<input class="keys6" disabled onfocus="this.select();" onkeydown="event.stopPropagation(); System.pads[1].configKey(6, event.key);" style="width:5rem; text-align:center;">
				</div>
				<div style="text-align:center;">
					A<br>
					<input class="keys7" disabled onfocus="this.select();" onkeydown="event.stopPropagation(); System.pads[1].configKey(7, event.key);" style="width:5rem; text-align:center;">
				</div>
			</div>
		</div>
		<hr>
	</div>

	<div id="screenContainer">
		<div id="screen" style="position:relative; width:256px; height:240px; overflow:hidden; transform-origin:0 0; transform:scale(1);">
		</div>
	</div>
</body>

<script>
System = undefined;
</script>
<script type="module">
import { System } from './System.js';

window.System = System;
System.start();
</script>
